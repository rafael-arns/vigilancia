---
title: "Tratamento de dados CadUnico municipal"
output: html_document
---



## Informações gerais

O código abaixo presta-se a inserção dos dados municipais no R. Para tal, as planilhas municipais já deverão estar alocadas em alguma pasta no computador, após download efetuado no CECAD.  Serão utilizadas duas planilhas, uma com dados familiares, e a segunda com dados dos indivíduos componentes das famílias descritas na primeira. São excluídos dados de identificação, como nomes e documentos de identificação. 


### Localizar pasta com arquivos

Na ação a seguir direciono o R para a pasta "Original_fevereiro_2017", a qual criei para guardar as planilhas baixadas a partir do CECAD. Tal pasta está inserida dentro de outras duas, "cadunico" e "documentos".  Cabe a cada pessoa criar a organização de pastas que melhor se adeque, e inserir o caminho correto para que o R possa encontrar os documentos que serão utilizados.

```{r}
setwd("~/Documentos/cadunico/Original_fevereiro_2017")
```

### Puxar os arquivos de dados para dentro do R

Após o download de dados do CECAD, defini que o arquivo com os dados familiares teria o nome "domicilio.csv" e o arquivo com dados individuais o nome "pessoa.csv".  Com o código abaixo o R lê os arquivos, e eles são alocados em duas variáveis, "domcad" para o arquivo "domicilio.csv", e "pescad" para o arquivo "pessoa.csv".  Os nomes atribuídos podem são da escolha de quem estiver realizando o trabalho, podendo ser alterados. Mas destaca-se que esses nomes serão utilizados em diversos momentos ao longo do tratamento dos dados, assim, caso decida alterar os nomes, terá de fazê-lo em todos os locais que aparecer.


```{r}
domcad <- read.csv("domicilio.csv", header = TRUE, sep= ";")
pescad <- read.csv("pessoa.csv", header = TRUE, sep= ";")
```

### Excluir variáveis indesejadas

Realiza a exclusão de variáveis para garantir sigilo de dados pessoais.

```{r}
domcad<-domcad[,c(-1,-5,-6,-7,-16,-17,-19,-20,-25,-39,-40,-41,-43,-46,-60,-62,-64)] 
pescad<-pescad[,c(-1,-3,-16,-17,-23:-26,-28:-33,-35:-46,-64,-66:-68)] 
```

### Incluir nomes para variáveis

Como as variáveis não possuem nomes de fácil compreensão, neste passo são incluídos nomes a cada variável, para que estas possam ser utilizadas com mais facilidade.

```{r}
names(domcad)<-c("familia","d_cadastro","d_atualizacao","bairro","tipo.rua",
                 "titulo_rua","nome_rua","numero","compl_numero",
                 "compl_ender","cep","ponto_ref","renda_percapita",
                 "faixa_renda","renda_fam","pbf","domicilio",
                 "tipo_domicilio","comodos","dormitorios","piso",
                 "paredes","agua","abastecimento_agua","banheiro",
                 "esgoto","lixo","iluminacao","calcada","indigena",
                 "reserva","quilombola","comun_quilombola","qtd_pessoas",
                 "qtd_familias","internados_0a17","internados_18a64",
                 "internados_65","vl_energia","vl_agua","vl_gas",
                 "vl_alimentacao","vl_transporte","vl_aluguel",
                 "vl_medicamentos","cod_EAS","cod_CRASCREAS","tradicionais")

names(pescad)<-c("familia","trab_infantil","nome","nis","nome_social",
                 "sexo","d_nascimento","parentesco","cor","nome_mae",
                 "nome_pai","local_nasc","uf_nasci","pais","cod_pais",
                 "certidao","faixa_etaria","rua","pbf","cpf","deficiencia",
                 "cegueira","bvisao","surdez_profunda","surdez_leve",
                 "fisica","mental","down","transt_mental","ajuda_terceiros_nr",
                 "ajuda_familia","ajuda_especializada","ajuda_vizinhos",
                 "ajuda_inst","ajuda_outros","alfabetizado","freq_escola",
                 "munic_escola","inep","curso","serie","maior_curso",
                 "ultima_serie","concluiu","trab_ult_sem","afastada_sem_pes",
                 "extrativista","funcao_princ","remuneracao","trab_12m",
                 "meses_trab","remuneracao_bruta","vl_doacao",
                 "vl_aposentadoria","vl_segdesemp","vl_pensaoal",
                 "vl_outros","dorme_rua","qtd_rua","dorme_alberg",
                 "qtd_alberg","dorme_domc","qtd_domc","dorme_outro",
                 "qtd_outro","tempo_rua","mot_moradia","mot_ameaca",
                 "mot_familia","mot_alcoolismo","mot_desemp","mot_trab",
                 "mot_saude","mot_prefer","mot_outro","mot_naosabe",
                 "mot_naoresp","tempo_cidade","familia_rua","contato_par",
                 "ativ_escola","ativ_coop","ativ_social","ativ_naosabe",
                 "ativ_naoresp","cras","creas","centropop","int_gov",
                 "inst_ong","hosp","teve_empreg","renda_constr",
                 "renda_guardacar","renda_carregador","renda_catador",
                 "renda_servgerais","renda_pedinte","renda_vendas",
                 "renda_outra","renda_nresp","naoatendido")

```


### Limpar e organizar bairros

Os cadastradores por vezes podem cometer pequenos erros de grafia ao registrarem o nome do bairro no qual a família reside, e isso acaba que o R entende cada versão do nome do bairro como uma localidade diferente.  Para organizar isso é necessário verificar quais são os nomes utilizados para os bairro no município e, localizados erros, proceder com a correção.  Para compreensão do código é importante notar o sinal utilizado "<-". O conteúdo que está a direita da seta é o nome correto do bairro que será usado para corrigir os dados em todos os locais em que houver algum dos nomes que estão à esquerda da seta, ou seja, os nomes que estão errados.  Destaque especial para "NA", esse é um padrão do R, utilizado para indicar valor ausente. Abaixo ele é também utilizado para substituir nomes que não tinham nenhuma correlação com os bairros do município, não sendo passíveis de uso. 

```{r}
bairro<-as.character(domcad[,4])
bairro[bairro==""|bairro=="13"|bairro=="20373705764"|bairro=="ALVORADA"|bairro=="ARACATUBA"|
         bairro=="COLINHA"|bairro=="RIACHO ANA MATIAS"|bairro=="RIO"|bairro=="GUARDA"|
          bairro=="15"|bairro=="RINCAO"]<-NA
bairro[bairro=="ABARDAO"]<-c("ALBARDAO")
bairro[bairro=="ALTO ARIRU"|bairro=="ALTTO ARIRIU"|bairro=="AUTO ARIRIU"|
         bairro=="ALTO ARIRIU                                                                 "]<-c("ALTO ARIRIU")
bairro[bairro=="ARIRU"|bairro=="LOTEAMENTO CANARIOS ARIRIU"|bairro=="ARIRIU JAQUEIRA"|
         bairro=="BAIRRO ARIRIU"|bairro=="ARIRIU                                                                      "|
         bairro=="ARIRIU PALHOCA"]<-c("ARIRIU")
bairro[bairro=="AIRIRU DA FORMIGA"|bairro=="ARIRIU FORMIGA"|bairro=="ARIRU DA FORMIGA"|bairro=="FORMIGA"|
         bairro=="ARIRIU DA FORMIGA                                                           "]<-c("ARIRIU DA FORMIGA")
bairro[bairro=="PONTA DO PAPAGAIO"|bairro=="PONTA PAPAGAIO"]<-c("BALNEARIO PONTA DO PAPAGAIO")
bairro[bairro=="BARA DO ARIRIU"|bairro=="BARRA"|bairro=="BARRA AIRIRIU"|bairro=="BARRA AIRIRU"|bairro=="BARRA ARIRIU"|
         bairro=="BARRA DDO ARIRIU"|bairro=="BARRA DO ARIIRIU"|bairro=="BARRA DO ARIIU"|bairro=="BARRA DO ARIRIRU"|
         bairro=="BARRADO ARIRIU"|bairro=="BARRA DO ARIRU"|bairro=="BARRA DO ARRIRU"|bairro=="BRRA DO ARIRIU"|
         bairro=="VILA NOVA"|bairro=="VILLA NOVA"|bairro=="BARRA DO ARIRIU LARANJEIRAS"|bairro=="BARRA DO ARIRIU VILA NOVA"|
         bairro=="JARDIM DAS LARAJEIRAS"|bairro=="JARDIM DA LARANJEIRA"|bairro=="JARDIM LARANJEIRAS"|
         bairro=="JARDIM LARANJEURAS"|bairro=="LARANJEIRAS"|bairro=="BARRA DO ARIRIU PACHECOS"|
         bairro=="BARRA DO ARIRIU                                                             "]<-c("BARRA DO ARIRIU")
bairro[bairro=="BELA BELA"|bairro=="BELA ISTA"|bairro=="BELA VISTA TERRA NOVA"|bairro=="BELA VSTA"|
         bairro=="BELLA VISTA"|bairro=="BEL VISTA"|bairro=="JAQUEIRA"|bairro=="JAQUERA"|bairro=="TERRA FRACA"|
         bairro=="BELA VISTA                                                                  "]<-c("BELA VISTA")
bairro[bairro=="BRAJARU"|bairro=="BREJARU                                                                     "]<-c("BREJARU")
bairro[bairro=="CAINHO NOVO"|bairro=="CAMIHO NOVO"|bairro=="CAMILNHO NOVO"|bairro=="CAMINHA NOVO"|bairro=="CAMINHO NOVOQ"|
         bairro=="CAMNHO NOVO"|bairro=="CAMNHO OVO"|bairro=="CAMNIHO NOVO"|bairro=="PADRE REUS"|
         bairro=="CAMINHO NOVO                                                                "]<-c("CAMINHO NOVO")
bairro[bairro=="CENTRA"|bairro=="CENTRO DE PALHOCA"|bairro=="CENTRO PALHOACA"|bairro=="CENTRO PALHOCA"|bairro=="PALHOA"|
         bairro=="PALHOCA"|bairro=="PALHOCA CENTRO"|
         bairro=="CENTRO                                                                      "]<-c("CENTRO")
bairro[bairro=="ENSEADA BRITO"|bairro=="ENSEADA DE BRITO"|bairro=="ENSEADA DO BRITOQ"|bairro=="ENSEADA E BRITO"|
         bairro=="ENSEADO DO BRITO"|bairro=="MAR AZUL"|bairro=="ENSEADA DEOBRITO"|
         bairro=="PINHEIRA MAR AZUL"|bairro=="ENSADA DE BRITO"]<-c("ENSEADA DO BRITO")
bairro[bairro=="FREI DA MIAO"|bairro=="FREI DAMIO"|bairro=="FREI DAMIOA"|
         bairro=="FREI DA MIAO                                                                "|
         bairro=="FREI DAMIAO                                                                 "]<-c("FREI DAMIAO")
bairro[bairro=="GUARADA DO EMBAU"|bairro=="GUARDA EMABAU"|bairro=="GUARDA EMBAU"]<-c("GUARDA DO EMBAU")
bairro[bairro=="GUARDA CUBATAO"|bairro=="GUARDA DO CBATAO"|bairro=="GUARDA DO CUMBATAO"|bairro=="GUARDA DO GUBATAO"|
         bairro=="GURADA DO CUBATAO"|bairro=="GUARDA DOCUBATAO"|bairro=="GUARDO DO CUBATAO"]<-c("GUARDA DO CUBATAO")
bairro[bairro=="JARDIM COQUEIRAS"|bairro=="JARDIM COQUEIRO"|bairro=="JARDIM COQUEIROS AQUARIOS"]<-c("JARDIM COQUEIROS")
bairro[bairro=="ELDORADO"|bairro=="JARDIN ELDORADO III"|bairro=="JARDIM ELDORODO"|
         bairro=="JARDIN ELDORADO"|bairro=="AQUARIUS"|bairro=="JARDIM AGUArm(RIUS"|
         bairro=="JARDIM AQUARIO"|bairro=="JARDIM AQUARIOS"|
         bairro=="JARDIM AGUARIOS"|bairro=="JARDIM AGUARIUS"|bairro=="JARDIM AGUARIOS"|
         bairro=="JARDIM AGUARIUS"|bairro=="JARDIM AQUARIUS"|
         bairro=="JARDIM ELDORADO                                                             "]<-c("JARDIM ELDORADO")
bairro[bairro=="JARDIM EUCALIPTUS"|bairro=="JARDIM EUCALIPTO"]<-c("JARDIM EUCALIPTOS")
bairro[bairro=="JARDINS DAS PALMEIRAS"|bairro=="JARDIM PALMEIRAS"|bairro=="PALMEIRAS"|
         bairro=="JARDIM DAS PALMEIRA"]<-c("JARDIM DAS PALMEIRAS")
bairro[bairro=="LOTEAMENTO MADRI"]<-c("MADRI")
bairro[bairro=="MASSIAMBU"|bairro=="MASSIMABU"|bairro=="MASSIMBU"]<-c("MACIAMBU")
bairro[bairro=="MORRETES DE BAIXO"|bairro=="MORRETES DOIS"|bairro=="MORRETES I"|bairro=="MORRETES II"|
         bairro=="MORRETES UM"|bairro=="GUARDA DO EMBAU MORRETES"|bairro=="GUARDA DO EMBAU MORRETES II"]<-c("MORRETES")
bairro[bairro=="PACEHCOS"|bairro=="PACHCOS"|bairro=="PACHECO"|bairro=="PACHECOS ARIRIU"|
       bairro=="PACHECOS BARRA DO ARIRIU"|bairro=="PACHECOS BARRA DO ARIRU"|bairro=="PACHECOS VILA NOVA"|
         bairro=="PACHECOS B ARIRIU"]<-c("PACHECOS")
bairro[bairro=="PAGANI PARQUE RESIDENCIAL"|bairro=="PARQUE RESIDENCIAL PAGANI"]<-c("PAGANI")
bairro[bairro=="PASSA INTE"|bairro=="PASSAVINTE"|bairro=="PASSA VITNE"|bairro=="PAASA VINTE"|
         bairro=="PASSA VINTE                                                                 "]<-c("PASSA VINTE")
bairro[bairro=="PASSAGEM DO MACIAMU"|bairro=="PASSAGEM DO MACIANBU"|bairro=="PASSAGEM DO MASSIAMBU"|
         bairro=="PASSAGEM DO MASSIAMU"|bairro=="PASSAGEM MACIAMBU"|bairro=="PASSAGEM MASSIAMBU"|
         bairro=="MORRO DOS CAVALOS"|bairro=="PASSAGEM"]<-c("PASSAGEM DO MACIAMBU")
bairro[bairro=="CIDADE UNIVERSITARIA"|bairro=="CIDADE UNIVERSITARIA PEDRA BRANCA"|
         bairro=="FAZENDA PEDRA BRANCA"]<-c("PEDRA BRANCA")
bairro[bairro=="PIINHEIRA"|bairro=="MAR ABERTO"|bairro=="PRAIA DA PINHEIRA"|
         bairro=="PRAIA DA PINHEIRA PRAIA DO MEIO"|bairro=="PRAIA DO MEIO"|
         bairro=="PRAIA DO MEIO PINHEIRA"]<-c("PINHEIRA")
bairro[bairro=="PONTE"|bairro=="PONTE D"|bairro=="PONTE DDO IMARUIM"|bairro=="PONTE DE IMARUI"|bairro=="PONTE DE IMARUIM"|
         bairro=="PONTE DE IMARUM"|bairro=="PONTE DO IMARIUM"|bairro=="PONTE DO IMARUM"|bairro=="PONTE IMARIUM"|
         bairro=="PONTE IMARUIM"|bairro=="PONTE IMARUIN"|bairro=="PONTI DO IMARUIM"|bairro=="PONTRE DO IMARUIM"|
         bairro=="CASQUEIRO"|bairro=="PAGARA GRANDE"|
         bairro=="PONTE DE IMARUI                                                             "|
         bairro=="PONTE DE IMARUIM                                                            "|
         bairro=="PONTE DO IMARUIM                                                            "|
         bairro=="PONTE DO IMARUM                                                             "|
         bairro=="POTE DO IMARUIM"]<-c("PONTE DO IMARUIM")
bairro[bairro=="PRAIA DEFORA"|bairro=="PRAIA FORA"|bairro=="PRIAA DE FORA"|bairro=="PONTAL"|
         bairro=="PONTAL BR 101"|
         bairro=="PRAIA DE FORA                                                               "]<-c("PRAIA DE FORA")
bairro[bairro=="PRAIA DO DONHO"|bairro=="PASSAGEM PRAIA DO SONHO"|bairro=="PASSAGEM DA PRAIA DO SAONHO"|
         bairro=="PRAIA DO SNHO"|
         bairro=="PRAIA DO SONHO                                                              "]<-c("PRAIA DO SONHO")
bairro[bairro=="NOVA PALHOCA RIO GRANDE"|bairro=="NOVA PALHOCA"|
         bairro=="RIO GRANDE                                                                  "]<-c("RIO GRANDE")
bairro[bairro=="SAO SEBATIAO"|bairro=="MORRO DO CIPO"|bairro=="SAO SABASTIAO"|bairro=="ALAOR SILVEIRA"|
         bairro=="ALAOR SILVEIRA II"|bairro=="SA SEBASTIAO"|
         bairro=="SAO SEBASTIAO                                                               "]<-c("SAO SEBASTIAO")
bairro[bairro=="SERTAO CAMPO"]<-c("SERTAO DO CAMPO")
domcad[,4]<-bairro  
rm(bairro)
```


### Redefinir classes de variáveis

As variáveis podem ser lógicas (logical), textos (character), numéricas (integer), categóricas (factor). A definição de classes permite empregar métodos corretos para análise dos dados.

#### Redefinindo classes para informações domiciliares / familiares

```{r}
domcad[,c(2:3)]<-lapply(domcad[,c(2:3)], as.Date, format="%Y-%m-%d") ##introduz formato de data
domcad[,c(5:7,10,12,31,33)]<-lapply(domcad[,c(5:7,10,12,31,33)],as.character)
domcad$bairro<-factor(domcad$bairro)
domcad[,c(8,9,38)]<-lapply(domcad[,c(8,9,38)],as.integer)
domcad[,c(23,25,30,32)]<-lapply(domcad[,c(23,25,30,32)], factor,levels=c(1,2),labels=c("Sim","Nao"))
domcad$faixa_renda<-factor(domcad$faixa_renda,levels = (1:4),
                           labels = c("R$<77,00",
                                      "77,01<R$<154,00",
                                      "154,01<R$<1/2 sal.minimo",
                                      "R$>1/2 sal. minimo"))
domcad$pbf<-factor(domcad$pbf,levels = c(0,1),labels = c("NÃ£o","Sim"))
domcad$domicilio<-factor(domcad$domicilio,levels = c(1,2),labels = c("Urbanas","Rural"))
domcad$tipo_domicilio<-factor(domcad$tipo_domicilio,levels = c(1,2,3),
                              labels = c("Particular Permanente","Particular Improvisado","Coletivo"))
domcad$piso<-factor(domcad$piso,levels = c(1:7),
                    labels = c("Terra","Cimento","Madeira Aproveitada",
                               "Madeira Aparelhada","Ceramica, lajota ou pedra",
                               "Carpete","Outro"))
domcad$paredes<-factor(domcad$paredes,levels = c(1:8),
                       labels = c("Alvenaria/tijolo com revestimento",
                                  "Alvenaria/tijolo sem revestimento",
                                  "Madeira aparelhada",
                                  "Taipa revestida",
                                  "Taipa nÃ£o revestida",
                                  "Madeira Aproveitada",
                                  "Palha","Outro material"))
domcad$abastecimento_agua<-factor(domcad$abastecimento_agua,levels = (1:4),
                                  labels = c("Rede geral de distribuiÃ§Ã£o",
                                             "PoÃ§o ou nascente",
                                             "Cisterna","Outra forma"))
domcad$esgoto<-factor(domcad$esgoto,levels = c(1:6),
                      labels = c("Rede coletora de esgoto ou pluvial",
                                 "Fossa septica",
                                 "Fossa rudimentar",
                                 "Vala a ceu aberto",
                                 "Direto para um rio, lago ou mar",
                                 "Outra forma"))
domcad$lixo<-factor(domcad$lixo,levels = c(1:6),
                    labels = c("Coletado diretamente",
                               "Coletado indiretamente",
                               "Queimado ou enterrado na propriedade",
                               "Jogado em terreno baldio",
                               "Jogado em rio ou mar",
                               "Outro destino"))
domcad$iluminacao<-factor(domcad$iluminacao,levels = c(1:6),
                          labels = c("ElÃ©trica com medidor prÃ³prio",
                                     "ElÃ©trica com medidor comunitÃ¡rio",
                                     "ElÃ©trica sem medidor",
                                     "Ãleo, queroseno ou gÃ¡s",
                                     "Vela","Outra forma"))
domcad$calcada<-factor(domcad$calcada,levels = c(1:3),
                       labels = c("Total","Parcial","Inexistente"))
domcad$tradicionais<-factor(domcad$tradicionais,levels = c(101,201,202,203,204,205,301,302,303,304,305,306,0),
                            labels = c("Familia cigana","Familia extrativista",
                                       "Familia de pescadores artesanais",
                                       "Familia pertencente a comunidade de Terreiro",
                                       "Familia ribeirinha",
                                       "Familia agricultores familiares",
                                       "Familia assentada da reforma agraria",
                                       "Familia benefi. do Prog. Nac. de Credito Fundiario",
                                       "Familia acampada",
                                       "Familia atingida por empreendimento de infraestrutura",
                                       "Familia de preso do Sistema CercerÃ¡rio",
                                       "Familia catadores de material reciclavel",
                                       "Nenhuma"))
```

#### Redefinindo classes para informações pessoais / indivíduos

```{r}
pescad$trab_infantil<-factor(pescad$trab_infantil,levels = c(1,2),labels = c("Sim","NÃ£o"))
pescad[,c(3,5,10,11)]<-lapply(pescad[,c(3,5,10,11)], as.character)
pescad$sexo<-factor(pescad$sexo,levels = c(1,2),
                    labels = c("Masculino","Feminino"))
pescad$d_nascimento<-as.Date(pescad$d_nascimento,format="%Y-%m-%d")
pescad$parentesco<-factor(pescad$parentesco,levels = c(1:11),
                          labels = c("ResponsÃ¡vel pela unidade familiar",
                                     "Conjuge ou companheiro","Filho(a)",
                                     "Enteado(a)","Neto(a) ou Bisneto(a)",
                                     "Pai ou mÃ£e", "Sogro","IrmÃ£o ou irmÃ£",
                                     "Genro ou nora","Outro parente",
                                     "NÃ£o parente"))
pescad$cor<-factor(pescad$cor,levels = c(1:5),
                   labels = c("Branca","Preta",
                              "Amarela","Parda",
                              "Indigena"))
pescad$local_nasc<-factor(pescad$local_nasc,levels = c(1:3),
                          labels = c("Neste municÃ?pio",
                                     "Outro municÃ?pio",
                                     "Outro paÃ?s"))
pescad$certidao<-factor(pescad$certidao,levels = c(1:4),
                        labels = c("Com registro em cartÃ³rio e com CertidÃ£o",
                                   "Com registro em cartÃ³rio, mas sem CertidÃ£o",
                                   "NÃ£o","NÃ£o sabe"))
pescad$faixa_etaria<-factor(pescad$faixa_etaria,levels = c(0:12),
                            labels = c("0 a 4","5 a 6","7 a 15",
                                       "16 a 17","18 a 24","25 a 34",
                                       "35 a 39","40 a 44","45 a 49",
                                       "50 a 54","55 a 59","60 a 64",
                                       "maior que 65"))
pescad[,c(18,19,22:35,58,60,62,64,67:77,81:91,93:102)]<-lapply(
                                pescad[,c(18,19,22:35,58,60,62,64,67:77,81:91,93:102)], 
                                factor,
                                levels=c(0,1),
                                labels=c("NÃ£o","Sim"))
pescad[,c(21,36,38,44:47,50,79)]<-lapply(pescad[,c(21,36,38,44:47,50,79)], factor,
                          levels=c(1,2),labels=c("Sim","NÃ£o"))
pescad$freq_escola<-factor(pescad$freq_escola,levels = c(1:4),
                           labels = c("Rede pÃºblica",
                                      "Rede particular",
                                      "JÃ¡ frequentou",
                                      "Nunca frequentou"))
pescad$curso<-factor(pescad$curso,levels = c(1:14),
                     labels = c("Creche",
                                "Pre-escola(exceto CA)",
                                "Classe de alfabetizaÃ§Ã£o-CA",
                                "Ensino Fundamental regular-8 anos",
                                "Ensino Fundamental regular-9 anos",
                                "Ensino Fundamental especial",
                                "Ensino MÃ©dio regular",
                                "Ensino MÃ©dio especial",
                                "Ensino Fundamental EJA-1 a 4",
                                "Ensino Fundamental EJA-5 a 8",
                                "Ensino MÃ©dio EJA",
                                "AlfabetizaÃ§Ã£o para adultos-Mobral",
                                "Superior,AperfeiÃ§oamento,EspecializaÃ§Ã£o, Mestrado,Doutorado",
                                "Pre-vestibular"))
pescad[,c(41,43)]<-lapply(pescad[,c(41,43)],factor,levels = c(1:10),
                                                     labels = c("Primeiro",
                                                                "Segundo","Terceiro",
                                                                "Quarto","Quinto",
                                                                "Sexto","Setimo",
                                                                "Oitavo","Nono",
                                                                "Curso nÃ£o-seriado"))
pescad$maior_curso<-factor(pescad$maior_curso,levels = c(1:15),
                           labels = c("Creche",
                                      "Pre-escola (exceto CA)",
                                      "Classe de AlfabetizaÃ§Ã£o-CA",
                                      "Ensino Fundamental 1-4, Elementar (Primario)",
                                      "Ensino Fundamental 5-8, Meio 1 ciclo (Ginasial)",
                                      "Ensino Fundamental -9 anos",
                                      "Ensino Fundamental especial",
                                      "Ensino MÃ©dio, 2 grau,Medio 2 ciclo (CientÃ?fico,TÃ©cnico, Normal)",
                                      "Ensino MÃ©dio especial",
                                      "Ensino Fundamental EJA -1 a 4",
                                      "Ensino Fundamental EJA -5 a 8",
                                      "Ensino MÃ©dio EJA",
                                      "Superior,AperfeiÃ§oamento,EspecializaÃ§Ã£o, Mestrado,Doutorado",
                                      "AlfabetizaÃ§Ã£o para adultos-Mobral",
                                      "Nenhum"))
pescad$funcao_princ<-factor(pescad$funcao_princ,levels = c(1:11),
                            labels = c("Autonomo",
                                       "Trabalhador temporÃ¡rio rural",
                                       "Empregado sem CT assinada",
                                       "Empregado com CT assinada",
                                       "Trabalhador domÃ©stico sem CT assinada",
                                       "Trabalhador domÃ©stico com CT assinada",
                                       "Trabalhador nÃ£o remunerado",
                                       "Militar ou servidor pÃºblico",
                                       "Empregador",
                                       "EstagiÃ¡rio",
                                       "Aprendiz"))
pescad[,c(66,78)]<-lapply(pescad[,c(66,78)],factor,levels = c(1:6),
                                                         labels = c("atÃ© 06 meses",
                                                                    "entre 06 meses e 1 ano",
                                                                    "entre 1 e 2 anos",
                                                                    "entre 2 e 5 anos",
                                                                    "entre 5 e 10 anos",
                                                                    "mais de 10 anos"))
pescad$contato_par<-factor(pescad$contato_par,levels = c(1:6),
                           labels = c("Todo dia",
                                      "Toda semana",
                                      "Todo Mes",
                                      "Todo ano",
                                      "Quase nunca",
                                      "Nunca"))
pescad$teve_empreg<-factor(pescad$teve_empreg,levels = c(1:3),
                           labels = c("Sim","Nao","Nao sabe"))
```


### Selecionar dados atualizados

Para ados atualizados são considerados os cadastros realizados ou atualizados a até 02 anos da data da análise.

#### Seleção de dados domiciliares / famíliares atualizados

```{r}
atual_domcad <- domcad[domcad$d_atualizacao>"2014-05-01",]
```

#### Seleção de dados individuais / membros das famílias, atualizados

Para maior eficiência, a partir deste ponto é utilizado o pacote "dplyr".

```{r}
library("dplyr")
atual_pescad<-semi_join(pescad,atual_domcad,by="familia")
```


### Todas os tabelas são transformadas por "dplyr"

Este procedimento irá conferir maior eficiência para análise de dados, demandando menos do processamento da máquina e possibilitando o uso de funções que otimizam o trabalho.  Os processos executados tiveram o objetivo de produzir dados atualizados que poderão ser utilizados para análises diversas.

```{r}
domic<-tbl_df(atual_domcad)
pess<-tbl_df(atual_pescad)
```










